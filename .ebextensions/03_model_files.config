files:
  "/opt/elasticbeanstalk/hooks/appdeploy/pre/03_copy_model_files.sh":
    mode: "000755"
    owner: root
    group: root
    content: |
      #!/bin/bash
      
      # Create models directory if it doesn't exist
      mkdir -p /var/app/current/models
      
      # Copy model files from the deployment package
      cd /var/app/staging
      if [ -f xgboost.pkl ]; then
          cp xgboost.pkl /var/app/current/models/
      fi
      
      # Set proper permissions
      chown -R webapp:webapp /var/app/current/models
      find /var/app/current/models -type f -exec chmod 644 {} \;
      find /var/app/current/models -type d -exec chmod 755 {} \; 