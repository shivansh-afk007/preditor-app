option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: app:app
  aws:elasticbeanstalk:application:environment:
    PYTHONPATH: /var/app/current
    FLASK_APP: app.py
    FLASK_ENV: production

packages:
  yum:
    gcc: []
    gcc-c++: []
    make: []
    wget: []
    sqlite-devel: []

container_commands:
  01_upgrade_pip:
    command: "source /var/app/venv/*/bin/activate && pip install --upgrade pip"
  02_install_requirements:
    command: "source /var/app/venv/*/bin/activate && pip install -r requirements.txt --no-cache-dir"
  03_install_gunicorn:
    command: "source /var/app/venv/*/bin/activate && pip install gunicorn"
  04_verify_xgboost:
    command: "source /var/app/venv/*/bin/activate && python -c 'import xgboost; print(xgboost.__version__)'"
  05_verify_sqlite:
    command: "source /var/app/venv/*/bin/activate && python -c 'import sqlite3; print(sqlite3.sqlite_version)'" 